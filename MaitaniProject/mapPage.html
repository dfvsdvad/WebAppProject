<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>トライデントOCアプリ</title>
  <link rel="stylesheet" href="main.css">
  <meta name=”viewport” content=”width=device-width,initial-scale=1.0″>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.4/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.3.4/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-messaging.js"></script>
</head>



<div id="wrap">
  <header class="pfix">
    <nav class="nav" id="nav_f">
      <ul>
        <li><a href="OC_anke.html" class="list"><span style="border-bottom: solid 5px white;">アンケート入力画面</span></a></li>
        <li><a href="bbb.html" class="list"><span style="border-bottom: solid 5px white;">【スタッフ用】混雑状況入力</span></a></li>

      </ul>
    </nav>
    <div id="target">
      <div class="target_inner">
        <span class="target_inner_line target_inner_1" id="line1"></span>
        <span class="target_inner_line target_inner_2" id="line2"></span>
        <span class="target_inner_line target_inner_3" id="line3"></span>
      </div>
    </div>

    <h1 id="t">トライデントオープンキャンパスアプリ</h1>

  </header>

</div>

<body>



  <table border=1 id="table1">
    <tr>
      <td id="td1">混雑</td>
      <td style="font-size: 20px;">他の学科から回ることを推奨します</td>
    </tr>

    <tr>
      <td id="td2">普通</td>
      <td style="font-size: 20px">場合によっては混雑するかもしれません</td>
    </tr>

    <tr>
      <td id="td3">空き</td>
      <td style="font-size: 20px">空いています</td>
    </tr>

  </table>

  <div id="trident_map">
    <b>
      <p style="text-align: center;">学科をタップすると各学科の説明が表示されます</p>
    </b>
    <label for="button6f">6F </label><button id="button6f">CGスペシャリスト学科</button><br>
    <label for="button5f">5F </label><button id="button5f">WEBデザイン学科</button><br>
    <label for="button4f">4F </label>
    <button id="button4f">CAD学科</button>
    <button id="button4f2">情報系学科</button><br>
    <label for="button3f">3F </label><button id="button3f">ゲームサイエンス学科</button>
  </div>

  <script>
    function hamburger() {
      document.getElementById('line1').classList.toggle('linea');
      document.getElementById('line2').classList.toggle('lineb');
      document.getElementById('line3').classList.toggle('linec');
      document.getElementById('target').classList.toggle('slidex');
      document.getElementById('nav_f').classList.toggle('fadein');
    }

    document.getElementById('target').addEventListener('click', function() {
      hamburger();
    });

    let list = document.getElementsByClassName('list');

    for (let i = 0; i < list.length; i++) {
      list[i].addEventListener('click', function() {
        hamburger();
      });
    }
  </script>


  <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
      apiKey: "AIzaSyC8BVU_scpA1VsmQ8q7dtUvCmyzV9DkWBw",
      authDomain: "stone-citizen-293007.firebaseapp.com",
      databaseURL: "https://stone-citizen-293007.firebaseio.com",
      projectId: "stone-citizen-293007",
      storageBucket: "stone-citizen-293007.appspot.com",
      messagingSenderId: "30711139915",
      appId: "1:30711139915:web:87c02d9086eba140e207ce",
      measurementId: "G-P1TFK1KKEN"
    };
    // ファイアベースをイニシャライズ
    firebase.initializeApp(firebaseConfig);


    var firestore = firebase.firestore();

    const docRef = firestore.doc("subject/status");

    const f6 = document.querySelector("#button6f");
    console.log(f6.value);
    const f5 = document.querySelector("#button5f");

    var data = {
      cg: f6,
      web: f5
    };
    getRealtimeUpdates = function() {
      docRef.onSnapshot(function(doc) {
        if (doc && doc.exists) {
          const myData = doc.data();
          for (var key in data) {
            var zyoutai = myData["”" + key + "”"];
            console.log(zyoutai);
            var color;
            switch (zyoutai) {
              case "混んでる":
                color = "red";
                break;
              case "通常":
                color = "yellow";
                break;
              case "空いてる":
                color = "blue";
                break;
            }
            data[key].style.background = color;
          }
        }
      });
    }

    getRealtimeUpdates();
  </script>

</body></html>
