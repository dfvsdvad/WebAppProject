<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>込み具合管理画面</title>
  <!--firebaseに必要なスクリプトの読み込みとイニシャライズ  -->
  <script type="text/javascript" src="../firebaseImport.js"></script>
</head>

<body>


  <select name=”subject” id="subject">
    <option value=”it”>IT</option>
    <option value=”cg”>CG</option>
    <option value=”cad”>CAD</option>
    <option value=”game”>GAME</option>
    <option value=”vr”>VR・Vtuber</option>
    <option value=”web”>WEB</option>
  </select>

  <button id="high">混んでる</button>
  <button id="middle">通常</button>
  <button id="suki">空いてる</button>
  <p id="status">現在の状態: </p>


  <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional


    firebase.initializeApp(firebaseConfig); // ファイアベースをイニシャライズ

    var firestore = firebase.firestore();

    const docRef = firestore.doc("subject/status");

    const komi = document.querySelector("#komi");
    const hutuu = document.querySelector("#hutuu");
    const suki = document.querySelector("#suki");

    clickListener = function(e) {
      var select = document.getElementById('subject');//選択されている学科
      console.log("statusChange...");
      docRef.update({
        [select.value]: e.target.innerHTML//学科:込み具合
      }).then(function() {
        console.log("SUCCESS!");
      }).catch(function(error) {
        console.log("ERROR... :", error);
      });
    };


    // saveButtonボタンが押されたら実行する処理

    komi.addEventListener("click", clickListener);
    hutuu.addEventListener("click", clickListener);
    suki.addEventListener("click", clickListener);

  </script>

</body>

</html>
